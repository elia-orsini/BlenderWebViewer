"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("three"),i=function(t,i){return this.lut=[],this.setColorMap(t,i),this};i.prototype={constructor:i,lut:[],map:[],n:256,minV:0,maxV:1,set:function(t){return t instanceof i&&this.copy(t),this},setMin:function(t){return this.minV=t,this},setMax:function(t){return this.maxV=t,this},setColorMap:function(i,n){this.map=a[i]||a.rainbow,this.n=n||32;var s=1/this.n;this.lut.length=0;for(let i=0;i<=1;i+=s)for(let a=0;a<this.map.length-1;a++)if(i>=this.map[a][0]&&i<this.map[a+1][0]){var r=this.map[a][0],e=this.map[a+1][0],h=new t.Color(this.map[a][1]),o=new t.Color(this.map[a+1][1]),u=h.lerp(o,(i-r)/(e-r));this.lut.push(u)}return this},copy:function(t){return this.lut=t.lut,this.map=t.map,this.n=t.n,this.minV=t.minV,this.maxV=t.maxV,this},getColor:function(t){t<=this.minV?t=this.minV:t>=this.maxV&&(t=this.maxV),t=(t-this.minV)/(this.maxV-this.minV);var i=Math.round(t*this.n);return i==this.n&&(i-=1),this.lut[i]},addColorMap:function(t,i){a[t]=i},createCanvas:function(){var t=document.createElement("canvas");return t.width=1,t.height=this.n,this.updateCanvas(t),t},updateCanvas:function(i){var a=i.getContext("2d",{alpha:!1}),n=a.getImageData(0,0,1,this.n),s=n.data,r=0,e=1/this.n;for(let i=1;i>=0;i-=e)for(let a=this.map.length-1;a>=0;a--)if(i<this.map[a][0]&&i>=this.map[a-1][0]){var h=this.map[a-1][0],o=this.map[a][0],u=new t.Color(this.map[a-1][1]),m=new t.Color(this.map[a][1]),p=u.lerp(m,(i-h)/(o-h));s[4*r]=Math.round(255*p.r),s[4*r+1]=Math.round(255*p.g),s[4*r+2]=Math.round(255*p.b),s[4*r+3]=255,r+=1}return a.putImageData(n,0,0),i}};var a={rainbow:[[0,255],[.2,65535],[.5,65280],[.8,16776960],[1,16711680]],cooltowarm:[[0,3952322],[.2,10206463],[.5,14474460],[.8,16163717],[1,11797542]],blackbody:[[0,0],[.2,7864320],[.5,15086080],[.8,16776960],[1,16777215]],grayscale:[[0,0],[.2,4210752],[.5,8355712],[.8,12566463],[1,16777215]]};exports.ColorMapKeywords=a,exports.Lut=i;
