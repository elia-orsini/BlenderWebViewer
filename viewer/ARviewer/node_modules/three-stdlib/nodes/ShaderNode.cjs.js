"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./core/PropertyNode.cjs.js"),r=require("./core/VarNode.cjs.js"),o=require("./core/AttributeNode.cjs.js"),s=require("./core/ConstNode.cjs.js"),t=require("./core/UniformNode.cjs.js"),n=require("./accessors/BufferNode.cjs.js"),w=require("./accessors/PositionNode.cjs.js"),p=require("./accessors/NormalNode.cjs.js"),a=require("./accessors/CameraNode.cjs.js"),c=require("./accessors/ModelNode.cjs.js"),i=require("./accessors/TextureNode.cjs.js"),x=require("./accessors/UVNode.cjs.js"),u=require("./math/OperatorNode.cjs.js"),l=require("./math/CondNode.cjs.js"),d=require("./math/MathNode.cjs.js"),j=require("./utils/ArrayElementNode.cjs.js"),m=require("./utils/ConvertNode.cjs.js"),f=require("./utils/JoinNode.cjs.js"),N=require("./utils/SplitNode.cjs.js"),q=require("./core/NodeUtils.cjs.js");require("./core/Node.cjs.js"),require("./core/constants.cjs.js"),require("three"),require("./core/VaryNode.cjs.js"),require("./core/InputNode.cjs.js"),require("@babel/runtime/helpers/defineProperty"),require("./accessors/Object3DNode.cjs.js"),require("./core/TempNode.cjs.js"),require("./core/ExpressionNode.cjs.js"),require("./core/NodeBuilder.cjs.js"),require("./core/NodeUniform.cjs.js"),require("./core/NodeAttribute.cjs.js"),require("./core/NodeVary.cjs.js"),require("./core/NodeVar.cjs.js"),require("./core/NodeCode.cjs.js"),require("./core/NodeKeywords.cjs.js"),require("./core/ContextNode.cjs.js");const v={construct(e,r){const o=r.shift();return e(new b(o),...r)},get:function(e,r){if("string"==typeof r&&void 0===e[r]){if(!0===/^[xyzwrgbastpq]{1,4}$/.test(r))return r=r.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),new h(new N(e,r));if(!0===/^\d+$/.test(r))return new h(new j(e,_(Number(r))))}return e[r]}},g=new WeakMap,h=function(e){const r=typeof e;if("number"===r||"boolean"===r)return new h(A(e));if("object"===r&&!0===e.isNode){let r=g.get(e);return void 0===r&&(r=new Proxy(e,v),g.set(e,r),g.set(r,r)),r}return e},b=function(e){for(const r in e)e[r]=new h(e[r]);return e},I=e=>{const r=e.length;for(let o=0;o<r;o++)e[o]=new h(e[o]);return e},y=function(e,r=null,o=null){return null===r?(...r)=>new h(new e(...I(r))):null===o?(...o)=>new h(new e(r,...I(o))):(o=new h(o),(...s)=>new h(new e(r,...I(s),o)))},M=[!1,!0],T=[0,1,2,3],V=[-1,-2],P=[.5,1.5,1/3,1e-6,1e6,Math.PI,2*Math.PI,1/Math.PI,2/Math.PI,1/(2*Math.PI),Math.PI/2],O=new Map;for(let e of M)O.set(e,new s(e));const C=new Map;for(let e of T)C.set(e,new s(e,"uint"));const E=new Map([...C].map((e=>new s(e.value,"int"))));for(let e of V)E.set(e,new s(e,"int"));const L=new Map([...E].map((e=>new s(e.value))));for(let e of P)L.set(e,new s(e));for(let e of P)L.set(-e,new s(-e));const W=new Map([...O,...L]),A=e=>W.has(e)?W.get(e):!0===e.isNode?e:new s(e),D=function(e,r=null){return(...o)=>{if(0===o.length)return R(new s(q.getValueFromType(e),e));{if("color"===e&&!0!==o[0].isNode&&(o=[q.getValueFromType(e,...o)]),1===o.length&&null!==r&&r.has(o[0]))return r.get(o[0]);const s=o.map(A);return R(new m(1===s.length?s[0]:new f(s),e))}}},F=new Proxy((function(e){return(r,o)=>(new b(r),new h(e(r,o)))}),v),R=e=>new h(e),S=new D("color"),z=new D("float",L),U=new D("int",E),_=new D("uint",C),B=new D("bool",O),G=new D("vec2"),X=new D("ivec2"),Y=new D("uvec2"),$=new D("bvec2"),k=new D("vec3"),J=new D("ivec3"),K=new D("uvec3"),H=new D("bvec3"),Q=new D("vec4"),Z=new D("ivec4"),ee=new D("uvec4"),re=new D("bvec4"),oe=new D("mat3"),se=new D("imat3"),te=new D("umat3"),ne=new D("bmat3"),we=new D("mat4"),pe=new D("imat4"),ae=new D("umat4"),ce=new D("bmat4"),ie=new y(u,"+"),xe=new y(u,"-"),ue=new y(u,"*"),le=new y(u,"/"),de=new y(u,"%"),je=new y(u,"=="),me=new y(u,"="),fe=new y(u,"<"),Ne=new y(u,">"),qe=new y(u,"<="),ve=new y(u,">="),ge=new y(u,"&&"),he=new y(u,"||"),be=new y(u,"^^"),Ie=new y(u,"&"),ye=new y(u,"|"),Me=new y(u,"^"),Te=new y(u,"<<"),Ve=new y(u,">>"),Pe=new y(j),Oe=new h(new p(p.GEOMETRY)),Ce=new h(new p(p.LOCAL)),Ee=new h(new p(p.WORLD)),Le=new h(new p(p.VIEW)),We=new h(new r(new p(p.VIEW),"TransformedNormalView","vec3")),Ae=new h(new w(w.LOCAL)),De=new h(new w(w.WORLD)),Fe=new h(new w(w.VIEW)),Re=new h(new w(w.VIEW_DIRECTION)),Se=new h(new c(c.VIEW_MATRIX)),ze=new h(new a(a.POSITION)),Ue=new h(new e("DiffuseColor","vec4")),_e=new h(new e("Roughness","float")),Be=new h(new e("Metalness","float")),Ge=new h(new e("AlphaTest","float")),Xe=new h(new e("SpecularColor","color")),Ye=new y(d,"abs"),$e=new y(d,"acos"),ke=new y(d,"asin"),Je=new y(d,"atan"),Ke=new y(d,"ceil"),He=new y(d,"clamp"),Qe=new y(d,"cos"),Ze=new y(d,"cross"),er=new y(d,"degrees"),rr=new y(d,"dFdx"),or=new y(d,"dFdy"),sr=new y(d,"distance"),tr=new y(d,"dot"),nr=new y(d,"exp"),wr=new y(d,"exp2"),pr=new y(d,"faceforward"),ar=new y(d,"floor"),cr=new y(d,"fract"),ir=new y(d,"invert"),xr=new y(d,"inversesqrt"),ur=new y(d,"length"),lr=new y(d,"log"),dr=new y(d,"log2"),jr=new y(d,"max"),mr=new y(d,"min"),fr=new y(d,"mix"),Nr=new y(d,"mod"),qr=new y(d,"negate"),vr=new y(d,"normalize"),gr=new y(d,"pow"),hr=new y(d,"pow",2),br=new y(d,"pow",3),Ir=new y(d,"pow",4),yr=new y(d,"radians"),Mr=new y(d,"reflect"),Tr=new y(d,"refract"),Vr=new y(d,"round"),Pr=new y(d,"saturate"),Or=new y(d,"sign"),Cr=new y(d,"sin"),Er=new y(d,"smoothstep"),Lr=new y(d,"sqrt"),Wr=new y(d,"step"),Ar=new y(d,"tan"),Dr=new y(d,"transformDirection"),Fr=z(1e-6),Rr=z(1e6);exports.EPSILON=Fr,exports.INFINITY=Rr,exports.ShaderNode=F,exports.abs=Ye,exports.acos=$e,exports.add=ie,exports.addTo=(e,...r)=>(e.node=ie(e.node,...I(r)),R(e)),exports.alphaTest=Ge,exports.and=ge,exports.asin=ke,exports.assign=me,exports.atan=Je,exports.attribute=(...e)=>R(new o(...e)),exports.bitAnd=Ie,exports.bitOr=ye,exports.bitXor=Me,exports.bmat3=ne,exports.bmat4=ce,exports.bool=B,exports.buffer=(...e)=>R(new n(...e)),exports.bvec2=$,exports.bvec3=H,exports.bvec4=re,exports.cameraPosition=ze,exports.ceil=Ke,exports.clamp=He,exports.color=S,exports.cond=(...e)=>R(new l(...I(e))),exports.cos=Qe,exports.cross=Ze,exports.dFdx=rr,exports.dFdy=or,exports.degrees=er,exports.diffuseColor=Ue,exports.distance=sr,exports.div=le,exports.dot=tr,exports.element=Pe,exports.equal=je,exports.exp=nr,exports.exp2=wr,exports.faceforward=pr,exports.float=z,exports.floor=ar,exports.fract=cr,exports.greaterThan=Ne,exports.greaterThanEqual=ve,exports.imat3=se,exports.imat4=pe,exports.int=U,exports.inversesqrt=xr,exports.invert=ir,exports.ivec2=X,exports.ivec3=J,exports.ivec4=Z,exports.join=(...e)=>R(new f(I(e))),exports.label=(e,o)=>!0===(e=R(e)).isVarNode?(e.name=o,e):R(new r(e,o)),exports.length=ur,exports.lessThan=fe,exports.lessThanEqual=qe,exports.log=lr,exports.log2=dr,exports.mat3=oe,exports.mat4=we,exports.max=jr,exports.metalness=Be,exports.min=mr,exports.mix=fr,exports.mod=Nr,exports.mul=ue,exports.negate=qr,exports.nodeObject=R,exports.normalGeometry=Oe,exports.normalLocal=Ce,exports.normalView=Le,exports.normalWorld=Ee,exports.normalize=vr,exports.or=he,exports.positionLocal=Ae,exports.positionView=Fe,exports.positionViewDirection=Re,exports.positionWorld=De,exports.pow=gr,exports.pow2=hr,exports.pow3=br,exports.pow4=Ir,exports.radians=yr,exports.reflect=Mr,exports.refract=Tr,exports.remainder=de,exports.roughness=_e,exports.round=Vr,exports.sampler=e=>R(new m(!0===e.isNode?e:new i(e),"sampler")),exports.saturate=Pr,exports.shiftLeft=Te,exports.shiftRight=Ve,exports.sign=Or,exports.sin=Cr,exports.smoothstep=Er,exports.specularColor=Xe,exports.sqrt=Lr,exports.step=Wr,exports.sub=xe,exports.tan=Ar,exports.temp=e=>R(new r(R(e))),exports.texture=(...e)=>R(new i(...e)),exports.transformDirection=Dr,exports.transformedNormalView=We,exports.uint=_,exports.umat3=te,exports.umat4=ae,exports.uniform=e=>{var r;return e=!0===e.isNode?(null===(r=e.node)||void 0===r?void 0:r.value)||e.value:e,R(new t(e,e.nodeType))},exports.uv=(...e)=>R(new x(...e)),exports.uvec2=Y,exports.uvec3=K,exports.uvec4=ee,exports.vec2=G,exports.vec3=k,exports.vec4=Q,exports.viewMatrix=Se,exports.xor=be;
