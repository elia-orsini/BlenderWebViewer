"use strict";var e=require("@babel/runtime/helpers/defineProperty"),r=require("../core/Node.cjs.js"),s=require("../core/AttributeNode.cjs.js"),o=require("../core/VaryNode.cjs.js"),i=require("./ModelNode.cjs.js"),c=require("../math/MathNode.cjs.js"),t=require("../math/OperatorNode.cjs.js");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("../core/constants.cjs.js"),require("../core/NodeUtils.cjs.js"),require("three"),require("./Object3DNode.cjs.js"),require("../core/UniformNode.cjs.js"),require("../core/InputNode.cjs.js"),require("../core/TempNode.cjs.js"),require("../core/ExpressionNode.cjs.js"),require("../utils/JoinNode.cjs.js"),require("../utils/SplitNode.cjs.js"),require("../core/NodeBuilder.cjs.js"),require("../core/NodeUniform.cjs.js"),require("../core/NodeAttribute.cjs.js"),require("../core/NodeVary.cjs.js"),require("../core/NodeVar.cjs.js"),require("../core/NodeCode.cjs.js"),require("../core/NodeKeywords.cjs.js");var j=u(e);class n extends r{constructor(e=n.LOCAL){super("vec3"),this.scope=e}getHash(){return`position-${this.scope}`}generate(e){const r=this.scope;let u=null;if(r===n.GEOMETRY)u=new s("position","vec3");else if(r===n.LOCAL)u=new o(new n(n.GEOMETRY));else if(r===n.WORLD){const e=new c(c.TRANSFORM_DIRECTION,new i(i.WORLD_MATRIX),new n(n.LOCAL));u=new o(e)}else if(r===n.VIEW){const e=new t("*",new i(i.VIEW_MATRIX),new n(n.LOCAL));u=new o(e)}else if(r===n.VIEW_DIRECTION){const e=new c(c.NEGATE,new n(n.VIEW));u=new c(c.NORMALIZE,new o(e))}return u.build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}j.default(n,"GEOMETRY","geometry"),j.default(n,"LOCAL","local"),j.default(n,"WORLD","world"),j.default(n,"VIEW","view"),j.default(n,"VIEW_DIRECTION","viewDirection"),module.exports=n;
