"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/defineProperty"),t=require("three"),r=require("./Pass.cjs.js"),i=require("../shaders/AfterimageShader.cjs.js");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=s(e);class d extends r.Pass{constructor(e=.96,s=i.AfterimageShader){super(),a.default(this,"shader",void 0),a.default(this,"uniforms",void 0),a.default(this,"textureComp",void 0),a.default(this,"textureOld",void 0),a.default(this,"shaderMaterial",void 0),a.default(this,"compFsQuad",void 0),a.default(this,"copyFsQuad",void 0),this.shader=s,this.uniforms=t.UniformsUtils.clone(s.uniforms),this.uniforms.damp.value=e,this.textureComp=new t.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:t.LinearFilter,magFilter:t.NearestFilter,format:t.RGBAFormat}),this.textureOld=new t.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:t.LinearFilter,magFilter:t.NearestFilter,format:t.RGBAFormat}),this.shaderMaterial=new t.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.compFsQuad=new r.FullScreenQuad(this.shaderMaterial);let d=new t.MeshBasicMaterial;this.copyFsQuad=new r.FullScreenQuad(d)}render(e,t,r){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=r.texture,e.setRenderTarget(this.textureComp),this.compFsQuad.render(e),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this.copyFsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.copyFsQuad.render(e));let i=this.textureOld;this.textureOld=this.textureComp,this.textureComp=i}setSize(e,t){this.textureComp.setSize(e,t),this.textureOld.setSize(e,t)}}exports.AfterimagePass=d;
