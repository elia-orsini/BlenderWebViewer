"use strict";function t(t){const e=t.target,s=this.geometries.get(e);this.geometries.delete(e),this.info.memory.geometries--,e.removeEventListener("dispose",s);const i=e.index,o=e.attributes;null!==i&&this.attributes.remove(i);for(let t in o)this.attributes.remove(o[t])}module.exports=class{constructor(t,e){this.attributes=t,this.info=e,this.geometries=new WeakMap}update(e){if(!1===this.geometries.has(e)){const s=t.bind(this);this.geometries.set(e,s),this.info.memory.geometries++,e.addEventListener("dispose",s)}const s=e.attributes;for(let t in s)this.attributes.update(s[t]);const i=e.index;null!==i&&this.attributes.update(i,!0)}};
