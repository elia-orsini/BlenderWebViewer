"use strict";function e(e,r){return e.groupOrder!==r.groupOrder?e.groupOrder-r.groupOrder:e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.material.id!==r.material.id?e.material.id-r.material.id:e.z!==r.z?e.z-r.z:e.id-r.id}function r(e,r){return e.groupOrder!==r.groupOrder?e.groupOrder-r.groupOrder:e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.z!==r.z?r.z-e.z:e.id-r.id}class t{constructor(){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparent=[]}init(){this.renderItemsIndex=0,this.opaque.length=0,this.transparent.length=0}getNextRenderItem(e,r,t,n,s,d){let i=this.renderItems[this.renderItemsIndex];return void 0===i?(i={id:e.id,object:e,geometry:r,material:t,groupOrder:n,renderOrder:e.renderOrder,z:s,group:d},this.renderItems[this.renderItemsIndex]=i):(i.id=e.id,i.object=e,i.geometry=r,i.material=t,i.groupOrder=n,i.renderOrder=e.renderOrder,i.z=s,i.group=d),this.renderItemsIndex++,i}push(e,r,t,n,s,d){const i=this.getNextRenderItem(e,r,t,n,s,d);(!0===t.transparent?this.transparent:this.opaque).push(i)}unshift(e,r,t,n,s,d){const i=this.getNextRenderItem(e,r,t,n,s,d);(!0===t.transparent?this.transparent:this.opaque).unshift(i)}sort(t,n){this.opaque.length>1&&this.opaque.sort(t||e),this.transparent.length>1&&this.transparent.sort(n||r)}finish(){for(let e=this.renderItemsIndex,r=this.renderItems.length;e<r;e++){const r=this.renderItems[e];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.program=null,r.group=null}}}module.exports=class{constructor(){this.lists=new WeakMap}get(e,r){const n=this.lists,s=n.get(e);let d;return void 0===s?(d=new t,n.set(e,new WeakMap),n.get(e).set(r,d)):(d=s.get(r),void 0===d&&(d=new t,s.set(r,d))),d}dispose(){this.lists=new WeakMap}};
