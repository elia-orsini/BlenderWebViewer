"use strict";var e=require("@babel/runtime/helpers/defineProperty"),t=require("../core/Node.cjs.js"),r=require("../inputs/Vector3Node.cjs.js"),o=require("../inputs/Matrix4Node.cjs.js"),i=require("../core/constants.cjs.js");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("../core/InputNode.cjs.js"),require("three");var u=s(e);class n extends t{constructor(e=n.POSITION){super(),this.updateType=i.NodeUpdateType.Frame,this.scope=e,this._inputNode=null}getType(){const e=this.scope;return e===n.PROJECTION||e===n.VIEW?"mat4":"vec3"}update(e){const t=e.camera,r=this._inputNode,o=this.scope;o===n.PROJECTION?r.value=t.projectionMatrix:o===n.VIEW?r.value=t.matrixWorldInverse:o===n.POSITION&&t.getWorldPosition(r.value)}generate(e,t){const i=e.getDataFromNode(this);let s=this._inputNode;if(void 0===i.inputNode){const e=this.scope;e===n.PROJECTION||e===n.VIEW?null!==s&&!0===s.isMatrix4Node||(s=new o(null)):e===n.POSITION&&(null!==s&&!0===s.isVector3Node||(s=new r)),this._inputNode=s,i.inputNode=s}return s.build(e,t)}}u.default(n,"POSITION","position"),u.default(n,"PROJECTION","projection"),u.default(n,"VIEW","view"),module.exports=n;
