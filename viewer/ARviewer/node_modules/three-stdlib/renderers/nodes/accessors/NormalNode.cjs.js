"use strict";var e=require("@babel/runtime/helpers/defineProperty"),r=require("../core/Node.cjs.js"),o=require("../core/AttributeNode.cjs.js"),t=require("../core/VaryNode.cjs.js"),s=require("./ModelNode.cjs.js"),i=require("./CameraNode.cjs.js"),c=require("../math/OperatorNode.cjs.js"),a=require("../math/MathNode.cjs.js");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("../core/constants.cjs.js"),require("../inputs/Matrix4Node.cjs.js"),require("../core/InputNode.cjs.js"),require("three"),require("../inputs/Matrix3Node.cjs.js"),require("../inputs/Vector3Node.cjs.js");var u=d(e);class l extends r{constructor(e=l.LOCAL){super("vec3"),this.scope=e}generate(e,r){const d=this.getType(e),u=e.getDataFromNode(this,e.shaderStage),n=this.scope;let N=u.localNormalNode;void 0===N&&(N=new o("normal","vec3"),u.localNormalNode=N);let j=N;if(n===l.VIEW){let e=u.viewNormalNode;if(void 0===e){const r=new c("*",new s(s.NORMAL),N),o=new a(a.NORMALIZE,r);e=new a(a.NORMALIZE,new t(o)),u.viewNormalNode=e}j=e}else if(n===l.WORLD){let e=u.worldNormalNode;if(void 0===e){const r=new a(a.INVERSE_TRANSFORM_DIRETION,new l(l.VIEW),new i(i.VIEW));e=new t(r),u.worldNormalNode=e}j=e}const w=j.build(e,d);return e.format(w,d,r)}}u.default(l,"LOCAL","local"),u.default(l,"WORLD","world"),u.default(l,"VIEW","view"),module.exports=l;
