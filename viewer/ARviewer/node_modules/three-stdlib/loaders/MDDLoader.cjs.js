"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three");class t extends e.Loader{constructor(e){super(e)}load(t,r,a,o){const n=this,s=new e.FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.load(t,(function(e){r(n.parse(e))}),a,o)}parse(t){const r=new DataView(t),a=r.getUint32(0),o=r.getUint32(4);let n=8;const s=new Float32Array(a),l=new Float32Array(a*a).fill(0);for(let e=0;e<a;e++)s[e]=r.getFloat32(n),n+=4,l[a*e+e]=1;const i=new e.NumberKeyframeTrack(".morphTargetInfluences",s,l),c=new e.AnimationClip("default",s[s.length-1],[i]),p=[];for(let t=0;t<a;t++){const a=new Float32Array(3*o);for(let e=0;e<o;e++){const t=3*e;a[t+0]=r.getFloat32(n),n+=4,a[t+1]=r.getFloat32(n),n+=4,a[t+2]=r.getFloat32(n),n+=4}const s=new e.BufferAttribute(a,3);s.name="morph_"+t,p.push(s)}return{morphTargets:p,clip:c}}}exports.MDDLoader=t;
