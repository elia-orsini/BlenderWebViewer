"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AsciiEffect=function(e,t,o){t=void 0===t?" .:-=+*#%@":t,o||(o={});const n=o.resolution?o.resolution:.15,l=o.scale?o.scale:1,r=!!o.color&&o.color,a=!!o.alpha&&o.alpha,c=!!o.block&&o.block,s=!!o.invert&&o.invert;let i,d;const p=document.createElement("div");p.style.cursor="default";const g=document.createElement("table");let u,h,m;p.appendChild(g),this.setSize=(t,o)=>{i=t,d=o,e.setSize(t,o),function(){u=Math.round(i*w),h=Math.round(d*w),y.width=u,y.height=h,m=e.domElement,m.style.backgroundColor&&(g.rows[0].cells[0].style.backgroundColor=m.style.backgroundColor,g.rows[0].cells[0].style.color=m.style.color);g.cellSpacing=0,g.cellPadding=0;const t=g.style;t.display="inline",t.width=`${Math.round(u/w*l)}px`,t.height=`${Math.round(h/w*l)}px`,t.whiteSpace="pre",t.margin="0px",t.padding="0px",t.letterSpacing=`${M}px`,t.fontFamily=b,t.fontSize=`${C}px`,t.lineHeight=`${E}px`,t.textAlign="left",t.textDecoration="none"}()},this.render=(t,o)=>{e.render(t,o),function(e,t){v.clearRect(0,0,u,h),v.drawImage(x,0,0,u,h);const o=v.getImageData(0,0,u,h).data;let n="";for(let e=0;e<h;e+=2){for(let t=0;t<u;t++){const l=4*(e*u+t),i=o[l],d=o[l+1],p=o[l+2],g=o[l+3];let h,m;m=(.3*i+.59*d+.11*p)/255,0==g&&(m=1),h=Math.floor((1-m)*(k.length-1)),s&&(h=k.length-h-1);let f=k[h];void 0!==f&&" "!=f||(f="&nbsp;"),n+=r?`<span style='color:rgb(${i},${d},${p});${c?`background-color:rgb(${i},${d},${p});`:""}${a?`opacity:${g/255};`:""}'>${f}</span>`:f}n+="<br/>"}t.innerHTML=`<tr><td>${n}</td></tr>`}(0,g)},this.domElement=p;const f=" .,:;i1tfLCG08@".split(""),$=" CGO08@".split("");var b="courier new, monospace";const x=e.domElement;var y=document.createElement("canvas");if(!y.getContext)return;const v=y.getContext("2d");if(!v.getImageData)return;let k=r?$:f;t&&(k=t);var w=.5;w=.25,n&&(w=n);var C=2/w*l,E=2/w*l,M=0;switch(l){case 1:M=-1;break;case 2:case 3:M=-2.1;break;case 4:M=-3.1;break;case 5:M=-4.15}};
