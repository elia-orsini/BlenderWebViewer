"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three");exports.PeppersGhostEffect=function(t){const r=this;let o,s,i;r.cameraDistance=15,r.reflectFromAbove=!1;const a=new e.PerspectiveCamera,n=new e.PerspectiveCamera,c=new e.PerspectiveCamera,p=new e.PerspectiveCamera,l=new e.Vector3,d=new e.Quaternion,m=new e.Vector3;t.autoClear=!1,this.setSize=(e,r)=>{o=e/2,e<r?(s=e/3,i=e/3):(s=r/3,i=r/3),t.setSize(e,r)},this.render=(e,u)=>{e.updateMatrixWorld(),null===u.parent&&u.updateMatrixWorld(),u.matrixWorld.decompose(l,d,m),a.position.copy(l),a.quaternion.copy(d),a.translateZ(r.cameraDistance),a.lookAt(e.position),n.position.copy(l),n.quaternion.copy(d),n.translateZ(-r.cameraDistance),n.lookAt(e.position),n.rotation.z+=Math.PI/180*180,c.position.copy(l),c.quaternion.copy(d),c.translateX(-r.cameraDistance),c.lookAt(e.position),c.rotation.x+=Math.PI/180*90,p.position.copy(l),p.quaternion.copy(d),p.translateX(r.cameraDistance),p.lookAt(e.position),p.rotation.x+=Math.PI/180*90,t.clear(),t.setScissorTest(!0),t.setScissor(o-s/2,2*i,s,i),t.setViewport(o-s/2,2*i,s,i),r.reflectFromAbove?t.render(e,n):t.render(e,a),t.setScissor(o-s/2,0,s,i),t.setViewport(o-s/2,0,s,i),r.reflectFromAbove?t.render(e,a):t.render(e,n),t.setScissor(o-s/2-s,i,s,i),t.setViewport(o-s/2-s,i,s,i),r.reflectFromAbove?t.render(e,p):t.render(e,c),t.setScissor(o+s/2,i,s,i),t.setViewport(o+s/2,i,s,i),r.reflectFromAbove?t.render(e,c):t.render(e,p),t.setScissorTest(!1)}};
