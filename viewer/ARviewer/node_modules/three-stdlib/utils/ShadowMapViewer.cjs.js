"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three"),i=require("../shaders/UnpackDepthRGBAShader.cjs.js"),t=function(t){var n,r=this,h=void 0!==t.name&&""!==t.name,s=10,o=10,a=256,d=256,w=new e.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,10);w.position.set(0,0,2);var p,l,u=new e.Scene,c=i.UnpackDepthRGBAShader,g=e.UniformsUtils.clone(c.uniforms),f=new e.ShaderMaterial({uniforms:g,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}),m=new e.PlaneGeometry(a,d),x=new e.Mesh(m,f);if(u.add(x),h){var v=(p=document.createElement("canvas")).getContext("2d");v.font="Bold 20px Arial";var y=v.measureText(t.name).width;p.width=y,p.height=25,v.font="Bold 20px Arial",v.fillStyle="rgba( 255, 0, 0, 1 )",v.fillText(t.name,0,20);var S=new e.Texture(p);S.magFilter=e.LinearFilter,S.minFilter=e.LinearFilter,S.needsUpdate=!0;var z=new e.MeshBasicMaterial({map:S,side:e.DoubleSide});z.transparent=!0;var M=new e.PlaneGeometry(p.width,p.height);l=new e.Mesh(M,z),u.add(l)}this.enabled=!0,this.size={width:a,height:d,set:function(e,i){this.width=e,this.height=i,x.scale.set(this.width/a,this.height/d,1),r.position.set(r.position.x,r.position.y)}},this.position={x:s,y:o,set:function(e,i){this.x=e,this.y=i;var t=r.size.width,n=r.size.height;x.position.set(-window.innerWidth/2+t/2+this.x,window.innerHeight/2-n/2-this.y,0),h&&l.position.set(x.position.x,x.position.y-r.size.height/2+p.height/2,0)}},this.render=function(e){this.enabled&&(g.tDiffuse.value=t.shadow.map.texture,n=e.autoClear,e.autoClear=!1,e.clearDepth(),e.render(u,w),e.autoClear=n)},this.updateForWindowResize=function(){this.enabled&&(w.left=window.innerWidth/-2,w.right=window.innerWidth/2,w.top=window.innerHeight/2,w.bottom=window.innerHeight/-2,w.updateProjectionMatrix(),this.update())},this.update=function(){this.position.set(this.position.x,this.position.y),this.size.set(this.size.width,this.size.height)},this.update()};t.prototype.constructor=t,exports.ShadowMapViewer=t;
