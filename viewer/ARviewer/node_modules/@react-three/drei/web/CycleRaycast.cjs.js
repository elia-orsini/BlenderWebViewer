"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@react-three/fiber");function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var n=r(e);exports.CycleRaycast=function({onChanged:e,portal:r,preventDefault:o=!0,scroll:l=!0,keyCode:u=9}){const c=n.useRef(0),a=t.useThree((e=>e.raycaster)),d=t.useThree((e=>e.get)),i=t.useThree((e=>e.gl));return n.useEffect((()=>{var t;let n,s=[];const v=a.filter,f=null!==(t=null==r?void 0:r.current)&&void 0!==t?t:i.domElement.parentNode,h=()=>f&&e&&e(s,Math.round(c.current)%s.length);a.filter=(e,t)=>{let r=[...e];r.length===s.length&&s.every((e=>r.map((e=>e.object.uuid)).includes(e.object.uuid)))||(c.current=0,s=r,h()),v&&(r=v(r,t));for(let e=0;e<Math.round(c.current)%r.length;e++){const e=r.shift();r=[...r,e]}return r};const m=e=>{var t,r;c.current=e(c.current),null==(t=d().events.handlers)||t.onPointerCancel(void 0),null==(r=d().events.handlers)||r.onPointerMove(n),h()},p=e=>{(e.keyCode||e.which===u)&&(o&&e.preventDefault(),s.length>1&&m((e=>e+1)))},g=e=>{o&&e.preventDefault();let t=0;e||(e=window.event),e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),s.length>1&&m((e=>Math.abs(e-t)))},y=e=>n=e;return document.addEventListener("pointermove",y,{passive:!0}),l&&document.addEventListener("wheel",g),void 0!==u&&document.addEventListener("keydown",p),()=>{a.filter=v,void 0!==u&&document.removeEventListener("keydown",p),l&&document.removeEventListener("wheel",g),document.removeEventListener("pointermove",y)}}),[i,d,a,o,l,u]),null};
